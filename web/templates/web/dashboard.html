{% extends 'web/main.html' %}

{% block content %}

<br>

<div class="row">
	<div class="col-md">
		<div class="card card-body">
			<h5>Alerts by Tag</h5>
		</div>
		<div class="card card-body">
			<h7>Pi Chart</h7>
		</div>
	</div>	
	<div class="col-md">
		<div class="card card-body">
			<h5>Metrics Being Queried</h5>
			
		</div>
		<div class="card card-body">
			<table class="table">
				{% for metric in metric_names %}
					<tr>
					<td>{{ metric }}</td>
					</tr>
				{% endfor %}
			</table>
		</div>
	</div>	
	
</div>

<br>

<div class="row">
	<div class="col-md">
		<div class="card card-body">
			<h5>Recent Alerts</h5>
		</div>
		<div class="card card-body">
			<table class="table">
				<tr>
					<th>Time</th>
					<th>Host</th>
					<th>Details</th>
				</tr>
				<tr>
					<td>2/23/2021 12:18PM</td>
					<td>slac.ncsu.edu</td>
					<td>Lorem Ipsum</td>
				</tr>
				<tr style="background-color:#F0E68C">
					<td>2/23/2021 12:20PM</td>
					<td>slac-2.ncsu.edu</td>
					<td>Active Lorem Ipsum</td>
				</tr>
				<tr>
					<td>2/23/2021 12:22PM</td>
					<td>slac-2.ncsu.edu</td>
					<td>Lorem Ipsum</td>
				</tr>
			</table>
		</div>
	</div>

	<div class="col-md">
		<div class="card card-body">
			<h5>Host Tags</h5>
			
		</div>
		<div class="card card-body">
			<table class="table">
				<tr>
					<th>Tag</th>
					<th># of Hosts</th>
				</tr>
				{% for tag in tag_list %}
					<tr>
					<td><a href="{% url 'tag' tag.name %}">{{ tag.name }}</a></td>
					<td>{{ host_list }}</td>
					<td>{{ tag.registration_key }}</td>
					</tr>
				{% endfor %}
			</table>
		</div>
	</div>	
</div>

<div class="row">

	<div class="col-md">
		<div class="card card-body">
			<h5>Reports</h5>
		</div>
		<div class="card card-body">
			<table class="table">
				<tr>
					<th>Time</th>
					<th>Host Name</th>
					<th>Metric</th>
					<th>Value</th>
				</tr>
				{% for report in page_obj %}
					<tr>
					<td>{{ report.time }}</td>
					<td>{{ report.host.guid }}</td>
					<td>{{ report.metric.name }}</td>
					<td>{{ report.value }}</td>
					</tr>
				{% endfor %}
			</table>
			<!--Pagination for the reports table-->
			<div class="pagination">
				<span class="step-links">
					{% if page_obj.has_previous %}
						<a href="?page=1">&laquo; first</a>
						<a href="?page={{ page_obj.previous_page_number }}">previous</a>
					{% endif %}
			
					<span class="current">
						Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
					</span>
			
					{% if page_obj.has_next %}
						<a href="?page={{ page_obj.next_page_number }}">next</a>
						<a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
					{% endif %}
				</span>
			</div>
		</div>
	</div>	
</div>

{% endblock %}